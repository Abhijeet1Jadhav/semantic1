name: Print PR Details to CSV
on:
  pull_request:
    types:
      - opened
      - closed

jobs:
  Dev_Deployment:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        
      - name: Print PR Message
        run: |
          pr_number=${{ github.event.pull_request.number }}
          pr_message=$(curl -s "https://api.github.com/repos/${{ github.repository }}/pulls/$pr_number" | jq -r '.head.commit.message')
          echo "::set-output name=pr_message::$pr_message"
          echo "PR Title: ${{ github.event.pull_request.title }}" 
          echo "PR Number: ${{ github.event.pull_request.number }}" 
          echo "PR URL: ${{ github.event.pull_request.html_url }}"
          
          jiraID=$(echo "${{ github.event.pull_request.title }}" | grep -oE 'IQE-[0-9]+')          
          echo "Extracted IQE Text: $jiraID"
          
          
      - name: extracting JIRA ID
        
      - name: Print PR Head Message
        run: |
          echo "PR Head Message: ${{ steps.pr.outputs.pr_message }}"
        
      
